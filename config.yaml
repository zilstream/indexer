# Zilstream Indexer Configuration

server:
  port: 8080
  metrics_port: 9090

chain:
  name: "zilliqa"
  chain_id: 32769
  rpc_endpoint: "https://api.zilliqa.com"
  block_time: 1s
  start_block: 0 # Set to 0 to start from latest

database:
  host: "localhost"
  port: 5432
  name: "zilstream"
  user: "melvin"
  password: ""
  ssl_mode: "disable"
  max_connections: 10

processor:
  batch_size: 10  # Reduced from 100 to avoid rate limiting
  workers: 2      # Reduced from 5 to avoid rate limiting
  
  # Fast sync settings (used when behind by > 10,000 blocks)
  fast_sync:
    enabled: true            # Enable automatic fast sync
    threshold: 10000         # Use fast sync when behind by this many blocks
    batch_size: 50           # Blocks per batch for fast sync
    workers: 20              # Number of parallel workers for fast sync
    buffer_size: 5000        # Bulk write buffer size
    skip_receipts: true      # Skip receipts for old blocks
    skip_receipts_below: 10000  # Skip receipts for blocks older than this many from tip
    requests_per_second: 50  # RPC rate limit

logging:
  level: "debug" # debug, info, warn, error
  format: "console" # json or console
